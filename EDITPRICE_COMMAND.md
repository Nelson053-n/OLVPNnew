# –ö–æ–º–∞–Ω–¥–∞ /editprice - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω

## –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–∞–Ω–¥–∞ `/editprice` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –∏–∑–º–µ–Ω—è—Ç—å —Ü–µ–Ω—ã –Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ (–¥–µ–Ω—å, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü) –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```
/editprice
```

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö —Ü–µ–Ω

–ü—Ä–∏ –≤—ã–∑–æ–≤–µ –∫–æ–º–∞–Ω–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∑–∞ –¥–µ–Ω—å (1 –¥–µ–Ω—å)
- –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∑–∞ –Ω–µ–¥–µ–ª—é (7 –¥–Ω–µ–π)  
- –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –∑–∞ –º–µ—Å—è—Ü (30 –¥–Ω–µ–π)

–ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–µ—Ä–∏–æ–¥–∞:
- üìÖ –î–µ–Ω—å - X‚ÇΩ
- üìÜ –ù–µ–¥–µ–ª—è - X‚ÇΩ
- üìÖ –ú–µ—Å—è—Ü - X‚ÇΩ

### –®–∞–≥ 2: –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É —Å –Ω—É–∂–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º.

### –®–∞–≥ 3: –í–≤–æ–¥ –Ω–æ–≤–æ–π —Ü–µ–Ω—ã

–ë–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–≤—É—é —Ü–µ–Ω—É:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
- –ü—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –Ω–æ–≤—É—é —Ü–µ–Ω—É (—Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ –≤ —Ä—É–±–ª—è—Ö)
- –ü—Ä–∏–º–µ—Ä: `50`

### –®–∞–≥ 4: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Ü–µ–Ω—ã:
- –¶–µ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `core/settings_prices.json`
- –í—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
  - –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ ‚Üí –ù–æ–≤–∞—è —Ü–µ–Ω–∞
  - –í—Å–µ —Ç–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ**

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ü–µ–Ω

**–ü—É—Ç—å:** `core/settings_prices.json`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "day": {
    "amount": 7,
    "days": 1,
    "word_days": "–¥–µ–Ω—å"
  },
  "week": {
    "amount": 40,
    "days": 7,
    "word_days": "–¥–Ω–µ–π"
  },
  "month": {
    "amount": 150,
    "days": 30,
    "word_days": "–¥–Ω–µ–π"
  }
}
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –æ–ø–ª–∞—Ç—ã

–¶–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤:
- `core/handlers/handlers_keyboards/get_key_handler.py`
  - `day_key()` - –æ–ø–ª–∞—Ç–∞ –∑–∞ –¥–µ–Ω—å
  - `week_key()` - –æ–ø–ª–∞—Ç–∞ –∑–∞ –Ω–µ–¥–µ–ª—é
  - `month_key()` - –æ–ø–ª–∞—Ç–∞ –∑–∞ –º–µ—Å—è—Ü

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ YooKassa –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑ JSON —Ñ–∞–π–ª–∞.

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
```
Price changed by admin {user_id}: {period} {old_price}‚ÇΩ -> {new_price}‚ÇΩ
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –Ω–∞ –º–µ—Å—è—Ü

```
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: /editprice

–ë–æ—Ç: üí∞ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω
     –î–µ–Ω—å (1 –¥–µ–Ω—å): 7‚ÇΩ
     –ù–µ–¥–µ–ª—è (7 –¥–Ω–µ–π): 40‚ÇΩ
     –ú–µ—Å—è—Ü (30 –¥–Ω–µ–π): 150‚ÇΩ
     
     –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã:
     [–ö–Ω–æ–ø–∫–∏: üìÖ –î–µ–Ω—å | üìÜ –ù–µ–¥–µ–ª—è | üìÖ –ú–µ—Å—è—Ü]

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: [–Ω–∞–∂–∏–º–∞–µ—Ç "üìÖ –ú–µ—Å—è—Ü - 150‚ÇΩ"]

–ë–æ—Ç: üí∞ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã: –ú–µ—Å—è—Ü (30 –¥–Ω–µ–π)
     –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: 150‚ÇΩ
     
     –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é —Ü–µ–Ω—É –≤ —Ä—É–±–ª—è—Ö (—Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ):
     –ù–∞–ø—Ä–∏–º–µ—Ä: 50

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: 120

–ë–æ—Ç: ‚úÖ –¶–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∞!
     
     –ú–µ—Å—è—Ü: 150‚ÇΩ ‚Üí 120‚ÇΩ
     
     üìä –¢–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã:
     ‚Ä¢ –î–µ–Ω—å (1 –¥–µ–Ω—å): 7‚ÇΩ
     ‚Ä¢ –ù–µ–¥–µ–ª—è (7 –¥–Ω–µ–π): 40‚ÇΩ
     ‚Ä¢ –ú–µ—Å—è—Ü (30 –¥–Ω–µ–π): 120‚ÇΩ
     
     ‚ö†Ô∏è –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫.
```

### –û—Ç–º–µ–Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ù–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `/cancel` –¥–ª—è –æ—Ç–º–µ–Ω—ã:

```
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: /cancel

–ë–æ—Ç: ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –æ—Ç–º–µ–Ω–µ–Ω–æ
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

```
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: abc

–ë–æ—Ç: ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç. –í–≤–µ–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä: 50
```

### –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ

```
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: -10

–ë–æ—Ç: ‚ùå –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞:
```

## FSM (Finite State Machine)

–ö–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FSM –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:

**–°–æ—Å—Ç–æ—è–Ω–∏—è:**
- `EditPriceStates.waiting_for_new_price` - –æ–∂–∏–¥–∞–Ω–∏–µ –≤–≤–æ–¥–∞ –Ω–æ–≤–æ–π —Ü–µ–Ω—ã

**Callback handlers:**
- `edprc_day` - –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ "–¥–µ–Ω—å"
- `edprc_week` - –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ "–Ω–µ–¥–µ–ª—è"
- `edprc_month` - –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ "–º–µ—Å—è—Ü"

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- ‚úÖ –°—Ç–∞—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –ù–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∏–ª—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
2. **–ù–µ—Ç –≤–ª–∏—è–Ω–∏—è –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —É–∂–µ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å backup `settings_prices.json` –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
4. **–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –ï—Å–ª–∏ —Ñ–∞–π–ª —É–¥–∞–ª–µ–Ω, —Å–æ–∑–¥–∞—é—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ü–µ–Ω—ã (7‚ÇΩ/40‚ÇΩ/150‚ÇΩ)
